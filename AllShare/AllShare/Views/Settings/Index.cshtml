@using System.Globalization
@model AllShare.Models.SettingsViewModel
@{
    ViewBag.Title = "Settings";
}


<div class="row">
    <div class="icon-bar three-up">
        <a class="item" href="@Url.Action("Index","Home")">
            <i class="step fi-home size-12"></i>
            <label>Home</label>
        </a>
        <a class="item" href="@Url.Action("Index", "Settings")">
            <i class="step fi-widget size-12"></i>
            <label>Settings</label>
        </a>
        <a class="item" href="@Url.Action("Logout", "Account")">
            <i class="step fi-target size-12"></i>
            <label>Logout</label>
        </a>
    </div>
</div>
<div class="row">
    <h2>Settings</h2>
    <div class="small-6 columns">
        <p>Log in with Facebook</p>
        <a class="item" href="@Url.Action("Facebook", "Settings")">
            <i class="step fi-social-facebook size-36"></i>
        </a>
    </div>
    <div class="small-6 columns">
        <p>Log in with Twitter</p>
        <a class="item" href="@Url.Action("Twitter", "Settings")">
            <i class="step fi-social-twitter size-36"></i>
        </a>
    </div>
</div>

<div class="row">
    <h3>Scheduled post</h3>
    @if (Model.Jobs != null && Model.Jobs.Count > 0)
    {
        <table>
            <thead>
            <tr>
                <td>#</td>
                <td>Description</td>
                <td>Image Source</td>
                <td>Author</td>
                <td>Share to</td>
                <td>Scheduled date</td>
                <td>Action</td>
            </tr>
            </thead>
            <tbody>
            @foreach (var job in Model.Jobs)
            {
                <tr>
                    <td>@job.Id</td>
                    <td>@job.Text</td>
                    <td width="250">@job.ImagePath</td>
                    <td>@job.AuthorUsername</td>
                    <td>Facebook</td>
                    @*<td>@(job.IsFacebook ? "Facebook" : "Twitter")</td>*@
                    <td>@job.ToBeRunAt.ToString("g", DateTimeFormatInfo.InvariantInfo)</td>
                    <td><button class="button alert">Delete</button></td>
                </tr>
            }
            </tbody>
        </table>
    }
    else
    {
        <h5>You currently don't have any scheduled jobs.</h5>
    }
</div>
@*<script>
    var doAjaxBeforeUnloadEnabled = true;
    var doAjaxBeforeUnload = function (evt) {
        if (!doAjaxBeforeUnloadEnabled) {
            return;
        }
        doAjaxBeforeUnloadEnabled = false;
        jQuery.ajax({
            url: "/Settings/LogOutOnUnload/",
            success: function (a) {
                console.debug("Ajax call finished");
            },
            async: false
        });
    }

    $(document).ready(function () {
        window.onbeforeunload = doAjaxBeforeUnload;
        $(window).unload(doAjaxBeforeUnload);
    });
</script>*@